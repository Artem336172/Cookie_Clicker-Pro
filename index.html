<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç™ Cookie Clicker Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #f59e0b;
            --primary-dark: #d97706;
            --secondary: #8b5cf6;
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --bg-card2: #16213e;
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --gold: #ffd700;
            --green: #10b981;
            --red: #ef4444;
            --blue: #3b82f6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--bg-dark);
            color: var(--text);
            font-family: 'Nunito', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(ellipse at 20% 50%, rgba(139,92,246,0.08) 0%, transparent 60%),
                        radial-gradient(ellipse at 80% 20%, rgba(245,158,11,0.08) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        .game-wrapper {
            position: relative;
            z-index: 1;
            display: grid;
            grid-template-columns: 280px 1fr 300px;
            grid-template-rows: auto 1fr;
            gap: 0;
            min-height: 100vh;
        }

        /* ===== HEADER ===== */
        .game-header {
            grid-column: 1 / -1;
            background: rgba(26,26,46,0.95);
            border-bottom: 2px solid rgba(245,158,11,0.3);
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            backdrop-filter: blur(10px);
        }

        .game-title {
            font-size: 1.6rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-stats {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--gold);
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .header-btns {
            display: flex;
            gap: 8px;
        }

        .btn-header {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: var(--text);
            padding: 6px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-family: 'Nunito', sans-serif;
            transition: all 0.2s;
        }

        .btn-header:hover {
            background: rgba(245,158,11,0.2);
            border-color: var(--primary);
        }

        /* ===== LEFT PANEL - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ===== */
        .left-panel {
            background: var(--bg-card);
            border-right: 1px solid rgba(255,255,255,0.05);
            padding: 16px;
            overflow-y: auto;
            max-height: calc(100vh - 65px);
        }

        .panel-title {
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-bottom: 20px;
        }

        .achievement {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.08);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, rgba(245,158,11,0.2), rgba(139,92,246,0.2));
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(245,158,11,0.2);
        }

        .achievement.locked {
            filter: grayscale(1) brightness(0.4);
        }

        .achievement:hover .achievement-tooltip {
            opacity: 1;
            transform: translateY(0);
        }

        .achievement-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%) translateY(5px);
            background: #1e293b;
            border: 1px solid rgba(245,158,11,0.3);
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.7rem;
            white-space: nowrap;
            opacity: 0;
            transition: all 0.2s;
            pointer-events: none;
            z-index: 100;
            color: var(--text);
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ */
        .stats-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 10px;
            background: rgba(255,255,255,0.03);
            border-radius: 6px;
            font-size: 0.8rem;
        }

        .stats-row span:first-child { color: var(--text-muted); }
        .stats-row span:last-child { color: var(--text); font-weight: 700; }

        /* ===== CENTER - –ì–ª–∞–≤–Ω–∞—è –∏–≥—Ä–∞ ===== */
        .center-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
            position: relative;
        }

        /* –°—á—ë—Ç—á–∏–∫ –º–æ–Ω–µ—Ç */
        .coins-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .coins-amount {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--gold), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }

        .coins-per-sec {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .coins-per-sec span {
            color: var(--green);
            font-weight: 700;
        }

        /* –ö–Ω–æ–ø–∫–∞ –∫–ª–∏–∫–∞ */
        .click-area {
            position: relative;
            margin: 20px 0;
        }

        .click-btn {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background: radial-gradient(circle at 35% 35%, #ffd700, #f59e0b 50%, #d97706);
            box-shadow: 0 0 40px rgba(245,158,11,0.4),
                        0 0 80px rgba(245,158,11,0.1),
                        inset 0 -8px 20px rgba(0,0,0,0.3),
                        inset 0 8px 20px rgba(255,255,255,0.2);
            transition: transform 0.1s, box-shadow 0.1s;
            font-size: 5rem;
            line-height: 1;
            position: relative;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .click-btn:active {
            transform: scale(0.92);
            box-shadow: 0 0 20px rgba(245,158,11,0.3),
                        inset 0 -4px 10px rgba(0,0,0,0.3);
        }

        .click-btn::after {
            content: '';
            position: absolute;
            top: 15%;
            left: 20%;
            width: 30%;
            height: 20%;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            filter: blur(6px);
        }

        /* –ü–ª–∞–≤–∞—é—â–∏–µ +1 */
        .float-text {
            position: fixed;
            font-weight: 900;
            font-size: 1.4rem;
            color: var(--gold);
            pointer-events: none;
            z-index: 9999;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            50% { opacity: 1; transform: translateY(-40px) scale(1.2); }
            100% { opacity: 0; transform: translateY(-80px) scale(0.8); }
        }

        /* –ú–Ω–æ–∂–∏—Ç–µ–ª—å –∫–ª–∏–∫–∞ */
        .multiplier-display {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .multiplier-badge {
            background: rgba(139,92,246,0.2);
            border: 1px solid rgba(139,92,246,0.4);
            color: #a78bfa;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è */
        .level-progress {
            width: 100%;
            max-width: 300px;
            margin-top: 20px;
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .progress-bar-outer {
            height: 8px;
            background: rgba(255,255,255,0.08);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* –ê–∫—Ç–∏–≤–Ω—ã–µ –±—É—Å—Ç–µ—Ä—ã */
        .boosters-active {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .booster-active {
            background: rgba(16,185,129,0.15);
            border: 1px solid rgba(16,185,129,0.3);
            border-radius: 8px;
            padding: 6px 12px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .booster-timer {
            color: var(--green);
            font-weight: 800;
        }

        /* ===== RIGHT PANEL - –ú–∞–≥–∞–∑–∏–Ω ===== */
        .right-panel {
            background: var(--bg-card2);
            border-left: 1px solid rgba(255,255,255,0.05);
            overflow-y: auto;
            max-height: calc(100vh - 65px);
        }

        .shop-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: sticky;
            top: 0;
            background: var(--bg-card2);
            z-index: 10;
        }

        .shop-tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-muted);
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            font-family: 'Nunito', sans-serif;
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
        }

        .shop-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .shop-content {
            padding: 12px;
        }

        .shop-section { display: none; }
        .shop-section.active { display: block; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ */
        .shop-item {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .shop-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 3px;
            height: 100%;
            background: var(--item-color, var(--primary));
        }

        .shop-item:hover {
            background: rgba(255,255,255,0.06);
            border-color: rgba(245,158,11,0.2);
            transform: translateX(2px);
        }

        .shop-item.can-buy {
            border-color: rgba(16,185,129,0.2);
        }

        .shop-item.can-buy:hover {
            border-color: rgba(16,185,129,0.4);
            box-shadow: 0 0 15px rgba(16,185,129,0.1);
        }

        .shop-item.cant-buy {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .shop-item.cant-buy:hover {
            transform: none;
        }

        .item-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .item-icon {
            font-size: 1.5rem;
            width: 36px;
            text-align: center;
        }

        .item-info { flex: 1; }

        .item-name {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text);
        }

        .item-desc {
            font-size: 0.7rem;
            color: var(--text-muted);
            line-height: 1.3;
        }

        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 6px;
        }

        .item-price {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.85rem;
            font-weight: 800;
            color: var(--gold);
        }

        .item-owned {
            font-size: 0.75rem;
            color: var(--text-muted);
            background: rgba(255,255,255,0.05);
            padding: 2px 8px;
            border-radius: 10px;
        }

        .item-effect {
            font-size: 0.7rem;
            color: var(--green);
            font-weight: 600;
        }

        /* –ü—Ä–µ–º–∏—É–º —Ç–æ–≤–∞—Ä—ã */
        .premium-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: linear-gradient(135deg, #f59e0b, #8b5cf6);
            color: white;
            font-size: 0.6rem;
            font-weight: 800;
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
        }

        .gems-display {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.85rem;
            font-weight: 800;
            color: #a78bfa;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--bg-card);
            border: 1px solid rgba(245,158,11,0.3);
            border-radius: 10px;
            padding: 12px 16px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 9999;
            transform: translateX(120%);
            transition: transform 0.3s ease;
            max-width: 260px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { border-color: rgba(16,185,129,0.4); }
        .notification.error { border-color: rgba(239,68,68,0.4); }
        .notification.achievement { border-color: rgba(245,158,11,0.4); }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: var(--bg-card);
            border: 2px solid var(--gold);
            border-radius: 16px;
            padding: 30px 40px;
            text-align: center;
            z-index: 10000;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 60px rgba(245,158,11,0.3);
        }

        .achievement-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .achievement-popup-icon {
            font-size: 4rem;
            margin-bottom: 10px;
        }

        .achievement-popup h3 {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--gold);
        }

        .achievement-popup p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 6px;
        }

        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            display: none;
        }

        .overlay.show { display: block; }

        /* –°–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

        /* –ê–¥–∞–ø—Ç–∏–≤ */
        @media (max-width: 1024px) {
            .game-wrapper {
                grid-template-columns: 240px 1fr 260px;
            }
        }

        @media (max-width: 768px) {
            .game-wrapper {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto auto;
            }

            .left-panel {
                max-height: none;
                border-right: none;
                border-bottom: 1px solid rgba(255,255,255,0.05);
            }

            .right-panel {
                max-height: none;
                border-left: none;
            }

            .center-panel {
                padding: 20px;
            }

            .coins-amount { font-size: 2.2rem; }
            .click-btn { width: 140px; height: 140px; font-size: 4rem; }

            .header-stats { gap: 12px; }
            .stat-value { font-size: 1rem; }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏ */
        @keyframes pulse-ring {
            0% { transform: scale(1); opacity: 0.5; }
            100% { transform: scale(1.4); opacity: 0; }
        }

        .click-btn-wrapper {
            position: relative;
            display: inline-block;
        }

        .pulse-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 2px solid rgba(245,158,11,0.4);
            animation: pulse-ring 2s ease-out infinite;
            pointer-events: none;
        }

        .pulse-ring:nth-child(2) { animation-delay: 0.7s; }
        .pulse-ring:nth-child(3) { animation-delay: 1.4s; }

        /* –®–∫–∞–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ */
        .crit-bar {
            width: 100%;
            max-width: 300px;
            margin-top: 12px;
        }

        .crit-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .crit-progress {
            height: 6px;
            background: rgba(255,255,255,0.06);
            border-radius: 3px;
            overflow: hidden;
        }

        .crit-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b);
            border-radius: 3px;
            transition: width 0.1s;
        }

        /* –ö–Ω–æ–ø–∫–∞ –ø–æ–∫—É–ø–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ */
        .buy-btn {
            background: linear-gradient(135deg, var(--green), #059669);
            border: none;
            color: white;
            padding: 5px 14px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            transition: all 0.2s;
        }

        .buy-btn:hover { transform: scale(1.05); }
        .buy-btn:disabled { background: rgba(255,255,255,0.1); cursor: not-allowed; }

        .buy-btn.gems-btn {
            background: linear-gradient(135deg, var(--secondary), #7c3aed);
        }
    </style>
</head>
<body>

<div class="game-wrapper">

    <!-- HEADER -->
    <header class="game-header">
        <div class="game-title">üç™ Cookie Clicker Pro</div>
        <div class="header-stats">
            <div class="stat-item">
                <div class="stat-value" id="headerCoins">0</div>
                <div class="stat-label">–ú–æ–Ω–µ—Ç</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="headerCPS">0</div>
                <div class="stat-label">–ú–æ–Ω–µ—Ç/—Å–µ–∫</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="headerLevel">1</div>
                <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
            </div>
            <div class="stat-item">
                <div class="gems-display">
                    <span>üíé</span>
                    <span id="headerGems">10</span>
                </div>
                <div class="stat-label">–ö—Ä–∏—Å—Ç–∞–ª–ª—ã</div>
            </div>
        </div>
        <div class="header-btns">
            <button class="btn-header" onclick="saveGame()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="btn-header" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å</button>
        </div>
    </header>

    <!-- LEFT PANEL -->
    <aside class="left-panel">
        <div class="panel-title">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
        <div class="achievement-grid" id="achievementGrid"></div>

        <div class="panel-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        <div class="stats-list">
            <div class="stats-row">
                <span>–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤</span>
                <span id="statClicks">0</span>
            </div>
            <div class="stats-row">
                <span>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</span>
                <span id="statTotal">0</span>
            </div>
            <div class="stats-row">
                <span>–ú–æ–Ω–µ—Ç –∑–∞ –∫–ª–∏–∫</span>
                <span id="statCPC">1</span>
            </div>
            <div class="stats-row">
                <span>–ú–æ–Ω–µ—Ç –≤ —Å–µ–∫—É–Ω–¥—É</span>
                <span id="statCPS">0</span>
            </div>
            <div class="stats-row">
                <span>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–¥–∞—Ä–æ–≤</span>
                <span id="statCrits">0</span>
            </div>
            <div class="stats-row">
                <span>–ö—É–ø–ª–µ–Ω–æ —É–ª—É—á—à–µ–Ω–∏–π</span>
                <span id="statUpgrades">0</span>
            </div>
            <div class="stats-row">
                <span>–í—Ä–µ–º—è –∏–≥—Ä—ã</span>
                <span id="statTime">0 –º–∏–Ω</span>
            </div>
        </div>
    </aside>

    <!-- CENTER -->
    <main class="center-panel">
        <div class="coins-display">
            <div class="coins-amount" id="coinsDisplay">0</div>
            <div class="coins-per-sec">
                <span id="cpsDisplay">0</span> –º–æ–Ω–µ—Ç/—Å–µ–∫ ‚Ä¢
                <span id="cpcDisplay">1</span> –∑–∞ –∫–ª–∏–∫
            </div>
        </div>

        <div class="click-area">
            <div class="click-btn-wrapper">
                <div class="pulse-ring"></div>
                <div class="pulse-ring"></div>
                <div class="pulse-ring"></div>
                <button class="click-btn" id="mainClickBtn" onclick="handleClick(event)" aria-label="–ö–ª–∏–∫–Ω—É—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–æ–Ω–µ—Ç">
                    üç™
                </button>
            </div>
        </div>

        <!-- –®–∫–∞–ª–∞ –∫—Ä–∏—Ç–∞ -->
        <div class="crit-bar">
            <div class="crit-label">
                <span>‚ö° –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä</span>
                <span id="critChance">5%</span>
            </div>
            <div class="crit-progress">
                <div class="crit-fill" id="critFill" style="width: 5%"></div>
            </div>
        </div>

        <!-- –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ -->
        <div class="multiplier-display" id="multiplierDisplay">
            <div class="multiplier-badge">üñ±Ô∏è x1 –∑–∞ –∫–ª–∏–∫</div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è -->
        <div class="level-progress">
            <div class="level-info">
                <span id="levelLabel">–£—Ä–æ–≤–µ–Ω—å 1</span>
                <span id="levelProgress">0 / 100</span>
            </div>
            <div class="progress-bar-outer">
                <div class="progress-bar-inner" id="levelBar" style="width: 0%"></div>
            </div>
        </div>

        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –±—É—Å—Ç–µ—Ä—ã -->
        <div class="boosters-active" id="activeBoosters"></div>
    </main>

    <!-- RIGHT PANEL - SHOP -->
    <aside class="right-panel">
        <div class="shop-tabs">
            <button class="shop-tab active" onclick="switchTab('upgrades')" aria-label="–£–ª—É—á—à–µ–Ω–∏—è">‚¨ÜÔ∏è –£–ª—É—á—à–µ–Ω–∏—è</button>
            <button class="shop-tab" onclick="switchTab('buildings')" aria-label="–ó–¥–∞–Ω–∏—è">üèóÔ∏è –ó–¥–∞–Ω–∏—è</button>
            <button class="shop-tab" onclick="switchTab('premium')" aria-label="–ü—Ä–µ–º–∏—É–º">üíé –ü—Ä–µ–º–∏—É–º</button>
        </div>

        <div class="shop-content">
            <!-- –£–ª—É—á—à–µ–Ω–∏—è -->
            <div class="shop-section active" id="section-upgrades">
                <div id="upgradesList"></div>
            </div>

            <!-- –ó–¥–∞–Ω–∏—è -->
            <div class="shop-section" id="section-buildings">
                <div id="buildingsList"></div>
            </div>

            <!-- –ü—Ä–µ–º–∏—É–º -->
            <div class="shop-section" id="section-premium">
                <div id="premiumList"></div>
            </div>
        </div>
    </aside>
</div>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
<div class="notification" id="notification" role="alert" aria-live="polite"></div>

<!-- –ü–æ–ø–∞–ø –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
<div class="overlay" id="overlay" onclick="closeAchievementPopup()"></div>
<div class="achievement-popup" id="achievementPopup">
    <div class="achievement-popup-icon" id="popupIcon">üèÜ</div>
    <h3 id="popupTitle">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!</h3>
    <p id="popupDesc">–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</p>
    <button class="btn-header" style="margin-top:16px" onclick="closeAchievementPopup()">–û—Ç–ª–∏—á–Ω–æ!</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ==================== –ò–ì–†–û–í–û–ï –°–û–°–¢–û–Ø–ù–ò–ï ====================
let game = {
    coins: 0,
    gems: 10,
    totalCoins: 0,
    clicks: 0,
    crits: 0,
    upgradesBought: 0,
    cpc: 1,           // coins per click
    cps: 0,           // coins per second
    critChance: 0.05, // 5%
    critMultiplier: 3,
    level: 1,
    levelXP: 0,
    levelXPNeeded: 100,
    startTime: Date.now(),
    activeBoosters: [],
    buildings: {},
    upgrades: {},
    premiumItems: {},
    achievements: {}
};

// ==================== –î–ê–ù–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–ô ====================
const upgradesData = [
    { id: 'u1', name: '–û—Å—Ç—Ä—ã–µ –Ω–æ–≥—Ç–∏', icon: 'üíÖ', desc: '+1 –º–æ–Ω–µ—Ç–∞ –∑–∞ –∫–ª–∏–∫', cost: 10, effect: () => { game.cpc += 1; }, color: '#f59e0b', req: 0 },
    { id: 'u2', name: '–î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä', icon: 'üëä', desc: '+3 –º–æ–Ω–µ—Ç—ã –∑–∞ –∫–ª–∏–∫', cost: 50, effect: () => { game.cpc += 3; }, color: '#f97316', req: 0 },
    { id: 'u3', name: '–ó–æ–ª–æ—Ç—ã–µ –ø–∞–ª—å—Ü—ã', icon: '‚ú®', desc: '+10 –º–æ–Ω–µ—Ç –∑–∞ –∫–ª–∏–∫', cost: 200, effect: () => { game.cpc += 10; }, color: '#eab308', req: 5 },
    { id: 'u4', name: '–®–∞–Ω—Å –∫—Ä–∏—Ç–∞ +5%', icon: '‚ö°', desc: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–¥–∞—Ä—ã +5%', cost: 150, effect: () => { game.critChance += 0.05; }, color: '#ef4444', req: 0 },
    { id: 'u5', name: '–ö—Ä–∏—Ç x5', icon: 'üí•', desc: '–ö—Ä–∏—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—å x5', cost: 500, effect: () => { game.critMultiplier = 5; }, color: '#ef4444', req: 10 },
    { id: 'u6', name: '–ê–≤—Ç–æ-–∫–ª–∏–∫', icon: 'ü§ñ', desc: '+2 –∫–ª–∏–∫–∞ –≤ —Å–µ–∫—É–Ω–¥—É', cost: 300, effect: () => { game.cps += 2; }, color: '#3b82f6', req: 0 },
    { id: 'u7', name: '–£—Å–∫–æ—Ä–∏—Ç–µ–ª—å', icon: 'üöÄ', desc: 'CPS x2', cost: 1000, effect: () => { game.cps *= 2; }, color: '#8b5cf6', req: 20 },
    { id: 'u8', name: '–ú–µ–≥–∞–∫–ª–∏–∫', icon: 'üåü', desc: '+50 –º–æ–Ω–µ—Ç –∑–∞ –∫–ª–∏–∫', cost: 2000, effect: () => { game.cpc += 50; }, color: '#f59e0b', req: 30 },
    { id: 'u9', name: '–®–∞–Ω—Å –∫—Ä–∏—Ç–∞ +15%', icon: 'üéØ', desc: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–¥–∞—Ä—ã +15%', cost: 3000, effect: () => { game.critChance += 0.15; }, color: '#ef4444', req: 50 },
    { id: 'u10', name: '–¢—É—Ä–±–æ-—Ä–µ–∂–∏–º', icon: '‚ö°', desc: '+100 CPS', cost: 5000, effect: () => { game.cps += 100; }, color: '#06b6d4', req: 100 },
];

// ==================== –î–ê–ù–ù–´–ï –ó–î–ê–ù–ò–ô ====================
const buildingsData = [
    { id: 'b1', name: '–ö–ª–∏–∫–µ—Ä-–ø–æ–º–æ—â–Ω–∏–∫', icon: 'üñ±Ô∏è', desc: '–ê–≤—Ç–æ-–∫–ª–∏–∫–∞–µ—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É', baseCost: 15, baseCPS: 0.1, color: '#3b82f6' },
    { id: 'b2', name: '–ë–∞–±—É—à–∫–∞', icon: 'üëµ', desc: '–ü–µ—á—ë—Ç –ø–µ—á–µ–Ω—å–µ —Å –ª—é–±–æ–≤—å—é', baseCost: 100, baseCPS: 0.5, color: '#f97316' },
    { id: 'b3', name: '–§–µ—Ä–º–∞', icon: 'üåæ', desc: '–í—ã—Ä–∞—â–∏–≤–∞–µ—Ç —Å–∞—Ö–∞—Ä–Ω—ã–π —Ç—Ä–æ—Å—Ç–Ω–∏–∫', baseCost: 500, baseCPS: 2, color: '#84cc16' },
    { id: 'b4', name: '–®–∞—Ö—Ç–∞', icon: '‚õèÔ∏è', desc: '–î–æ–±—ã–≤–∞–µ—Ç —à–æ–∫–æ–ª–∞–¥–Ω—É—é —Ä—É–¥—É', baseCost: 2000, baseCPS: 8, color: '#78716c' },
    { id: 'b5', name: '–§–∞–±—Ä–∏–∫–∞', icon: 'üè≠', desc: '–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø–µ—á–µ–Ω—å–µ 24/7', baseCost: 8000, baseCPS: 25, color: '#64748b' },
    { id: 'b6', name: '–ë–∞–Ω–∫', icon: 'üè¶', desc: '–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–µ—Ç –≤ –ø–µ—á–µ–Ω—å–µ', baseCost: 30000, baseCPS: 80, color: '#eab308' },
    { id: 'b7', name: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', icon: 'üî¨', desc: '–°–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –º–µ–≥–∞-–ø–µ—á–µ–Ω—å–µ', baseCost: 100000, baseCPS: 250, color: '#06b6d4' },
    { id: 'b8', name: '–ü–æ—Ä—Ç–∞–ª', icon: 'üåÄ', desc: '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ –¥—Ä—É–≥–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π', baseCost: 500000, baseCPS: 1000, color: '#8b5cf6' },
];

// ==================== –î–ê–ù–ù–´–ï –ü–†–ï–ú–ò–£–ú ====================
const premiumData = [
    { id: 'p1', name: '–ë—É—Å—Ç x2 (30 —Å–µ–∫)', icon: '‚ö°', desc: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Ö–æ–¥—ã –Ω–∞ 30 —Å–µ–∫—É–Ω–¥', cost: 2, costType: 'gems', color: '#f59e0b' },
    { id: 'p2', name: '–ú–µ–≥–∞-–±—É—Å—Ç x5 (60 —Å–µ–∫)', icon: 'üåü', desc: '–ü—è—Ç–∏–∫—Ä–∞—Ç–Ω—ã–π –¥–æ—Ö–æ–¥ –Ω–∞ 60 —Å–µ–∫—É–Ω–¥', cost: 5, costType: 'gems', color: '#ef4444' },
    { id: 'p3', name: '+500 –º–æ–Ω–µ—Ç', icon: 'üí∞', desc: '–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ 500 –º–æ–Ω–µ—Ç', cost: 1, costType: 'gems', color: '#eab308' },
    { id: 'p4', name: '+5000 –º–æ–Ω–µ—Ç', icon: 'üíé', desc: '–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ 5000 –º–æ–Ω–µ—Ç', cost: 5, costType: 'gems', color: '#8b5cf6' },
    { id: 'p5', name: '–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä Pro', icon: 'ü§ñ', desc: '+50 CPS –Ω–∞–≤—Å–µ–≥–¥–∞', cost: 10, costType: 'gems', color: '#3b82f6' },
    { id: 'p6', name: '–ó–æ–ª–æ—Ç–æ–π –∫–ª–∏–∫', icon: '‚ú®', desc: '+100 –º–æ–Ω–µ—Ç –∑–∞ –∫–ª–∏–∫ –Ω–∞–≤—Å–µ–≥–¥–∞', cost: 15, costType: 'gems', color: '#f59e0b' },
    { id: 'p7', name: '–ü–∞–∫–µ—Ç –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ x5', icon: 'üíé', desc: '–ü–æ–ª—É—á–∏—Ç—å 5 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤', cost: 50, costType: 'coins', color: '#a78bfa' },
    { id: 'p8', name: '–ü–∞–∫–µ—Ç –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ x20', icon: 'üíé', desc: '–ü–æ–ª—É—á–∏—Ç—å 20 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤', cost: 200, costType: 'coins', color: '#7c3aed' },
];

// ==================== –î–û–°–¢–ò–ñ–ï–ù–ò–Ø ====================
const achievementsData = [
    { id: 'a1', icon: 'üñ±Ô∏è', name: '–ü–µ—Ä–≤—ã–π –∫–ª–∏–∫!', desc: '–ö–ª–∏–∫–Ω–∏—Ç–µ –≤–ø–µ—Ä–≤—ã–µ', check: () => game.clicks >= 1 },
    { id: 'a2', icon: 'üí™', name: '–ö–ª–∏–∫–µ—Ä', desc: '100 –∫–ª–∏–∫–æ–≤', check: () => game.clicks >= 100 },
    { id: 'a3', icon: 'üèÉ', name: '–ö–ª–∏–∫–æ–º–∞–Ω', desc: '1000 –∫–ª–∏–∫–æ–≤', check: () => game.clicks >= 1000 },
    { id: 'a4', icon: 'üí∞', name: '–ü–µ—Ä–≤—ã–µ –º–æ–Ω–µ—Ç—ã', desc: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 100 –º–æ–Ω–µ—Ç', check: () => game.totalCoins >= 100 },
    { id: 'a5', icon: 'üíµ', name: '–ë–æ–≥–∞—Ç–µ–π', desc: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 10,000 –º–æ–Ω–µ—Ç', check: () => game.totalCoins >= 10000 },
    { id: 'a6', icon: 'üíé', name: '–ú–∏–ª–ª–∏–æ–Ω–µ—Ä', desc: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 1,000,000 –º–æ–Ω–µ—Ç', check: () => game.totalCoins >= 1000000 },
    { id: 'a7', icon: '‚ö°', name: '–ö—Ä–∏—Ç–∏–∫', desc: '10 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–¥–∞—Ä–æ–≤', check: () => game.crits >= 10 },
    { id: 'a8', icon: 'üèóÔ∏è', name: '–°—Ç—Ä–æ–∏—Ç–µ–ª—å', desc: '–ö—É–ø–∏—Ç–µ –ø–µ—Ä–≤–æ–µ –∑–¥–∞–Ω–∏–µ', check: () => Object.values(game.buildings).some(b => b > 0) },
    { id: 'a9', icon: 'üè≠', name: '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫', desc: '–ö—É–ø–∏—Ç–µ 10 –∑–¥–∞–Ω–∏–π', check: () => Object.values(game.buildings).reduce((a,b) => a+b, 0) >= 10 },
    { id: 'a10', icon: '‚¨ÜÔ∏è', name: '–£–ª—É—á—à–∞—Ç–µ–ª—å', desc: '–ö—É–ø–∏—Ç–µ 5 —É–ª—É—á—à–µ–Ω–∏–π', check: () => game.upgradesBought >= 5 },
    { id: 'a11', icon: 'üéØ', name: '–°–Ω–∞–π–ø–µ—Ä', desc: '–®–∞–Ω—Å –∫—Ä–∏—Ç–∞ 25%+', check: () => game.critChance >= 0.25 },
    { id: 'a12', icon: 'üöÄ', name: '–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π', desc: '100+ –º–æ–Ω–µ—Ç –≤ —Å–µ–∫—É–Ω–¥—É', check: () => game.cps >= 100 },
];

// ==================== –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –ß–ò–°–ï–õ ====================
function formatNum(n) {
    if (n >= 1e9) return (n/1e9).toFixed(2) + 'B';
    if (n >= 1e6) return (n/1e6).toFixed(2) + 'M';
    if (n >= 1e3) return (n/1e3).toFixed(1) + 'K';
    return Math.floor(n).toString();
}

// ==================== –ö–õ–ò–ö ====================
function handleClick(event) {
    let earned = game.cpc;
    let isCrit = Math.random() < game.critChance;

    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –±—É—Å—Ç–µ—Ä—ã
    let boostMult = getBoostMultiplier();

    if (isCrit) {
        earned *= game.critMultiplier;
        game.crits++;
        showFloatText(event, `+${formatNum(earned * boostMult)} üí•`, '#ef4444');
    } else {
        showFloatText(event, `+${formatNum(earned * boostMult)}`, '#ffd700');
    }

    earned *= boostMult;
    game.coins += earned;
    game.totalCoins += earned;
    game.clicks++;
    game.levelXP += 1;

    updateDisplay();
    checkAchievements();
    checkLevelUp();
}

function getBoostMultiplier() {
    let mult = 1;
    const now = Date.now();
    game.activeBoosters = game.activeBoosters.filter(b => b.until > now);
    game.activeBoosters.forEach(b => mult *= b.mult);
    return mult;
}

// ==================== –ü–õ–ê–í–ê–Æ–©–ò–ô –¢–ï–ö–°–¢ ====================
function showFloatText(event, text, color) {
    const el = document.createElement('div');
    el.className = 'float-text';
    el.textContent = text;
    el.style.color = color;

    const x = event.clientX - 20;
    const y = event.clientY - 20;
    el.style.left = x + 'px';
    el.style.top = y + 'px';

    document.body.appendChild(el);
    setTimeout(() => el.remove(), 1000);
}

// ==================== –ê–í–¢–û–ö–õ–ò–ö (CPS) ====================
setInterval(() => {
    if (game.cps > 0) {
        const boostMult = getBoostMultiplier();
        const earned = game.cps * 0.1 * boostMult; // –∫–∞–∂–¥—ã–µ 100–º—Å
        game.coins += earned;
        game.totalCoins += earned;
        game.levelXP += 0.01;
        checkLevelUp();
    }
    updateDisplay();
    updateBoosters();
    checkAchievements();
}, 100);

// ==================== –£–†–û–í–ï–ù–¨ ====================
function checkLevelUp() {
    if (game.levelXP >= game.levelXPNeeded) {
        game.levelXP -= game.levelXPNeeded;
        game.level++;
        game.levelXPNeeded = Math.floor(100 * Math.pow(1.5, game.level - 1));
        game.gems += 2; // –ö—Ä–∏—Å—Ç–∞–ª–ª—ã –∑–∞ —É—Ä–æ–≤–µ–Ω—å
        showNotification(`üéâ –£—Ä–æ–≤–µ–Ω—å ${game.level}! +2 –∫—Ä–∏—Å—Ç–∞–ª–ª–∞`, 'success');
    }
}

// ==================== –ü–û–ö–£–ü–ö–ò ====================
function buyUpgrade(id) {
    const upgrade = upgradesData.find(u => u.id === id);
    if (!upgrade) return;
    if (game.upgrades[id]) { showNotification('–£–∂–µ –∫—É–ø–ª–µ–Ω–æ!', 'error'); return; }
    if (game.coins < upgrade.cost) { showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error'); return; }

    game.coins -= upgrade.cost;
    game.upgrades[id] = true;
    game.upgradesBought++;
    upgrade.effect();

    showNotification(`‚úÖ ${upgrade.name} –∫—É–ø–ª–µ–Ω–æ!`, 'success');
    renderShop();
    updateDisplay();
    checkAchievements();
}

function buyBuilding(id) {
    const building = buildingsData.find(b => b.id === id);
    if (!building) return;
    const owned = game.buildings[id] || 0;
    const cost = Math.floor(building.baseCost * Math.pow(1.15, owned));

    if (game.coins < cost) { showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error'); return; }

    game.coins -= cost;
    game.buildings[id] = owned + 1;
    game.cps += building.baseCPS;

    showNotification(`‚úÖ ${building.name} –∫—É–ø–ª–µ–Ω–æ! CPS +${building.baseCPS}`, 'success');
    renderShop();
    updateDisplay();
    checkAchievements();
}

function buyPremium(id) {
    const item = premiumData.find(p => p.id === id);
    if (!item) return;

    if (item.costType === 'gems') {
        if (game.gems < item.cost) { showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤! üíé', 'error'); return; }
        game.gems -= item.cost;
    } else {
        if (game.coins < item.cost) { showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!', 'error'); return; }
        game.coins -= item.cost;
    }

    // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç
    switch(id) {
        case 'p1':
            game.activeBoosters.push({ name: '‚ö° –ë—É—Å—Ç x2', mult: 2, until: Date.now() + 30000 });
            showNotification('‚ö° –ë—É—Å—Ç x2 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 30 —Å–µ–∫!', 'success');
            break;
        case 'p2':
            game.activeBoosters.push({ name: 'üåü –ë—É—Å—Ç x5', mult: 5, until: Date.now() + 60000 });
            showNotification('üåü –ú–µ–≥–∞-–±—É—Å—Ç x5 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 60 —Å–µ–∫!', 'success');
            break;
        case 'p3':
            game.coins += 500;
            game.totalCoins += 500;
            showNotification('üí∞ +500 –º–æ–Ω–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ!', 'success');
            break;
        case 'p4':
            game.coins += 5000;
            game.totalCoins += 5000;
            showNotification('üíé +5000 –º–æ–Ω–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ!', 'success');
            break;
        case 'p5':
            game.cps += 50;
            showNotification('ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä Pro –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +50 CPS', 'success');
            break;
        case 'p6':
            game.cpc += 100;
            showNotification('‚ú® –ó–æ–ª–æ—Ç–æ–π –∫–ª–∏–∫! +100 –º–æ–Ω–µ—Ç –∑–∞ –∫–ª–∏–∫', 'success');
            break;
        case 'p7':
            game.gems += 5;
            showNotification('üíé +5 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ!', 'success');
            break;
        case 'p8':
            game.gems += 20;
            showNotification('üíé +20 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ!', 'success');
            break;
    }

    renderShop();
    updateDisplay();
}

// ==================== –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï ====================
function updateDisplay() {
    const fmt = formatNum;

    // –ú–æ–Ω–µ—Ç—ã
    document.getElementById('coinsDisplay').textContent = fmt(game.coins);
    document.getElementById('headerCoins').textContent = fmt(game.coins);
    document.getElementById('headerCPS').textContent = fmt(game.cps);
    document.getElementById('headerLevel').textContent = game.level;
    document.getElementById('headerGems').textContent = game.gems;

    // CPS –∏ CPC
    const boostMult = getBoostMultiplier();
    document.getElementById('cpsDisplay').textContent = fmt(game.cps * boostMult);
    document.getElementById('cpcDisplay').textContent = fmt(game.cpc * boostMult);

    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    document.getElementById('statClicks').textContent = fmt(game.clicks);
    document.getElementById('statTotal').textContent = fmt(game.totalCoins);
    document.getElementById('statCPC').textContent = fmt(game.cpc);
    document.getElementById('statCPS').textContent = fmt(game.cps);
    document.getElementById('statCrits').textContent = fmt(game.crits);
    document.getElementById('statUpgrades').textContent = game.upgradesBought;

    const mins = Math.floor((Date.now() - game.startTime) / 60000);
    document.getElementById('statTime').textContent = mins + ' –º–∏–Ω';

    // –£—Ä–æ–≤–µ–Ω—å
    document.getElementById('levelLabel').textContent = `–£—Ä–æ–≤–µ–Ω—å ${game.level}`;
    document.getElementById('levelProgress').textContent = `${Math.floor(game.levelXP)} / ${game.levelXPNeeded}`;
    document.getElementById('levelBar').style.width = `${(game.levelXP / game.levelXPNeeded) * 100}%`;

    // –ö—Ä–∏—Ç
    const critPct = Math.min(game.critChance * 100, 100);
    document.getElementById('critChance').textContent = critPct.toFixed(0) + '%';
    document.getElementById('critFill').style.width = critPct + '%';

    // –ú–Ω–æ–∂–∏—Ç–µ–ª–∏
    const multDiv = document.getElementById('multiplierDisplay');
    multDiv.innerHTML = `
        <div class="multiplier-badge">üñ±Ô∏è x${fmt(game.cpc)} –∑–∞ –∫–ª–∏–∫</div>
        <div class="multiplier-badge">‚ö° ${(game.critChance*100).toFixed(0)}% –∫—Ä–∏—Ç</div>
        <div class="multiplier-badge">üí• x${game.critMultiplier} –∫—Ä–∏—Ç</div>
        ${boostMult > 1 ? `<div class="multiplier-badge" style="background:rgba(239,68,68,0.2);border-color:rgba(239,68,68,0.4);color:#fca5a5">üî• –ë—É—Å—Ç x${boostMult}</div>` : ''}
    `;
}

// ==================== –ë–£–°–¢–ï–†–´ ====================
function updateBoosters() {
    const now = Date.now();
    game.activeBoosters = game.activeBoosters.filter(b => b.until > now);

    const container = document.getElementById('activeBoosters');
    container.innerHTML = game.activeBoosters.map(b => {
        const sec = Math.ceil((b.until - now) / 1000);
        return `<div class="booster-active">${b.name} <span class="booster-timer">${sec}—Å</span></div>`;
    }).join('');
}

// ==================== –ú–ê–ì–ê–ó–ò–ù ====================
function renderShop() {
    // –£–ª—É—á—à–µ–Ω–∏—è
    const upgradesList = document.getElementById('upgradesList');
    upgradesList.innerHTML = upgradesData.map(u => {
        const bought = game.upgrades[u.id];
        const canBuy = !bought && game.coins >= u.cost;
        const cantBuy = !bought && game.coins < u.cost;

        return `
        <div class="shop-item ${bought ? '' : canBuy ? 'can-buy' : 'cant-buy'}" 
             style="--item-color: ${u.color}"
             onclick="${bought ? '' : `buyUpgrade('${u.id}')`}">
            <div class="item-header">
                <div class="item-icon">${u.icon}</div>
                <div class="item-info">
                    <div class="item-name">${u.name} ${bought ? '‚úÖ' : ''}</div>
                    <div class="item-desc">${u.desc}</div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">ü™ô ${formatNum(u.cost)}</div>
                ${bought ? '<span class="item-owned">–ö—É–ø–ª–µ–Ω–æ</span>' : 
                  `<button class="buy-btn" ${cantBuy ? 'disabled' : ''} onclick="event.stopPropagation(); buyUpgrade('${u.id}')">–ö—É–ø–∏—Ç—å</button>`}
            </div>
        </div>`;
    }).join('');

    // –ó–¥–∞–Ω–∏—è
    const buildingsList = document.getElementById('buildingsList');
    buildingsList.innerHTML = buildingsData.map(b => {
        const owned = game.buildings[b.id] || 0;
        const cost = Math.floor(b.baseCost * Math.pow(1.15, owned));
        const canBuy = game.coins >= cost;

        return `
        <div class="shop-item ${canBuy ? 'can-buy' : 'cant-buy'}" 
             style="--item-color: ${b.color}"
             onclick="buyBuilding('${b.id}')">
            <div class="item-header">
                <div class="item-icon">${b.icon}</div>
                <div class="item-info">
                    <div class="item-name">${b.name}</div>
                    <div class="item-desc">${b.desc}</div>
                </div>
                <div class="item-owned">${owned}</div>
            </div>
            <div class="item-footer">
                <div class="item-price">ü™ô ${formatNum(cost)}</div>
                <div class="item-effect">+${b.baseCPS} CPS</div>
            </div>
        </div>`;
    }).join('');

    // –ü—Ä–µ–º–∏—É–º
    const premiumList = document.getElementById('premiumList');
    premiumList.innerHTML = premiumData.map(p => {
        const isGems = p.costType === 'gems';
        const canBuy = isGems ? game.gems >= p.cost : game.coins >= p.cost;

        return `
        <div class="shop-item ${canBuy ? 'can-buy' : 'cant-buy'}" 
             style="--item-color: ${p.color}"
             onclick="buyPremium('${p.id}')">
            <div class="premium-badge">Premium</div>
            <div class="item-header">
                <div class="item-icon">${p.icon}</div>
                <div class="item-info">
                    <div class="item-name">${p.name}</div>
                    <div class="item-desc">${p.desc}</div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">${isGems ? 'üíé' : 'ü™ô'} ${p.cost}</div>
                <button class="buy-btn ${isGems ? 'gems-btn' : ''}" 
                        ${!canBuy ? 'disabled' : ''}
                        onclick="event.stopPropagation(); buyPremium('${p.id}')">
                    ${isGems ? 'üíé –ö—É–ø–∏—Ç—å' : '–ö—É–ø–∏—Ç—å'}
                </button>
            </div>
        </div>`;
    }).join('');
}

// ==================== –î–û–°–¢–ò–ñ–ï–ù–ò–Ø ====================
function renderAchievements() {
    const grid = document.getElementById('achievementGrid');
    grid.innerHTML = achievementsData.map(a => {
        const unlocked = game.achievements[a.id];
        return `
        <div class="achievement ${unlocked ? 'unlocked' : 'locked'}" title="${a.name}">
            ${a.icon}
            <div class="achievement-tooltip">${a.name}</div>
        </div>`;
    }).join('');
}

function checkAchievements() {
    achievementsData.forEach(a => {
        if (!game.achievements[a.id] && a.check()) {
            game.achievements[a.id] = true;
            showAchievementPopup(a);
            renderAchievements();
        }
    });
}

function showAchievementPopup(achievement) {
    document.getElementById('popupIcon').textContent = achievement.icon;
    document.getElementById('popupTitle').textContent = achievement.name;
    document.getElementById('popupDesc').textContent = achievement.desc;

    document.getElementById('overlay').classList.add('show');
    document.getElementById('achievementPopup').classList.add('show');

    setTimeout(closeAchievementPopup, 4000);
}

function closeAchievementPopup() {
    document.getElementById('overlay').classList.remove('show');
    document.getElementById('achievementPopup').classList.remove('show');
}

// ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
let notifTimer;
function showNotification(msg, type = 'info') {
    const el = document.getElementById('notification');
    el.textContent = msg;
    el.className = `notification show ${type}`;
    clearTimeout(notifTimer);
    notifTimer = setTimeout(() => el.classList.remove('show'), 3000);
}

// ==================== –í–ö–õ–ê–î–ö–ò –ú–ê–ì–ê–ó–ò–ù–ê ====================
function switchTab(tab) {
    document.querySelectorAll('.shop-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.shop-section').forEach(s => s.classList.remove('active'));

    event.target.classList.add('active');
    document.getElementById(`section-${tab}`).classList.add('active');
}

// ==================== –°–û–•–†–ê–ù–ï–ù–ò–ï ====================
function saveGame() {
    localStorage.setItem('cookieClickerSave', JSON.stringify(game));
    showNotification('üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!', 'success');
}

function loadGame() {
    const saved = localStorage.getItem('cookieClickerSave');
    if (saved) {
        const data = JSON.parse(saved);
        Object.assign(game, data);
        game.activeBoosters = []; // –°–±—Ä–æ—Å–∏—Ç—å –±—É—Å—Ç–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        showNotification('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!', 'success');
    }
}

function resetGame() {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω!')) {
        localStorage.removeItem('cookieClickerSave');
        location.reload();
    }
}

// –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
setInterval(saveGame, 30000);

// ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
loadGame();
renderShop();
renderAchievements();
updateDisplay();

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –∫–∞–∂–¥—ã–µ 500–º—Å (–¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤)
setInterval(renderShop, 500);

</script>
</body>
</html>